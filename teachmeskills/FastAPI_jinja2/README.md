# Справочник погрузчиков

## Описание проекта

Проект разработан с использованием **FastAPI** и представляет собой систему учета и управления погрузчиками, включая регистрацию их характеристик и фиксирование инцидентов неисправностей. Основная цель проекта — обеспечить удобное управление информацией о погрузчиках и отслеживание их простоя, вызванного неисправностями.

### Функциональные возможности

#### 1. Информация о погрузчиках
В справочнике погрузчиков регистрируются следующие данные:
- **Марка погрузчика** — строковое значение, указывающее бренд или модель.
- **Номер погрузчика** — уникальный идентификатор в формате строки.
- **Грузоподъемность** — числовое значение, указывающее максимальный вес, который может поднять погрузчик.

#### 2. Информация о неисправностях
Каждая неисправность фиксируется в системе с указанием:
- **Дата и время установления проблемы** — регистрируется автоматически при создании уведомления о проблеме.
- **Дата и время решения проблемы** — может быть указана вручную после решения проблемы.
- **Время простоя** — рассчитывается автоматически как разница между временем начала и окончания инцидента. Если время окончания не указано, берется текущее время.
- **Описание проблемы** — текстовое описание неисправности.

### Сценарий работы

#### Основные операции со справочником:
- **Поиск по номеру погрузчика** — фильтрация по вхождению строки в поле "Номер погрузчика" (регистр символов не учитывается). Если строка поиска не заполнена — отображается полный список.
- **Сброс фильтра** — очистка поля поиска и отображение полного справочника.
- **Добавить погрузчик** — добавление новой записи с информацией о погрузчике.
- **Изменить погрузчик** — редактирование выбранной записи.
- **Удалить погрузчик** — удаление записи после подтверждения. Если за погрузчиком зарегистрированы простои — удаление запрещено.
- **Сохранить изменения** — сохранение всех изменений в базе данных.
- **Отменить изменения** — отмена текущих изменений после подтверждения запроса.

#### Управление простоями:
- **Регистрация нового инцидента** — добавление информации о новом инциденте с возможностью указать время начала и окончания.
- **Изменение инцидента** — редактирование информации о выбранном инциденте.
- **Удаление инцидента** — удаление записи о простое после подтверждения.

### Используемые технологии

- **FastAPI** — для разработки API сервиса.
- **PostgreSQL** — для хранения данных о погрузчиках и инцидентах.
- **SQLAlchemy** — для работы с базой данных.
- **Pydantic** — для валидации и сериализации данных.

### Требования к установке

1. Установите Python 3.8+.
2. Установите Poetry, если он ещё не установлен:
    ```bash
    curl -sSL https://install.python-poetry.org | python3 -
    ```
3. Установите зависимости с помощью Poetry:
    ```bash
    poetry install
    ```

4. Активируйте виртуальное окружение:
    ```bash
    poetry shell
    ```


### Запуск проекта

1. Выполните миграции базы данных:
    ```bash
    alembic upgrade head
    ```

2. Запустите FastAPI сервер:
    ```bash
    uvicorn app.main:app --reload
    ```

3. API будет доступно по адресу: `http://127.0.0.1:8000`.

### Описание базы данных

В проекте используется база данных PostgreSQL. Основные таблицы:
- **Погрузчики (forklifts)** — хранит информацию о погрузчиках (марка, номер, грузоподъемность).
- **Простои (downtime)** — хранит информацию о простоях, включая время начала и окончания инцидентов, описание проблемы.

### Лицензия

Этот проект распространяется под лицензией MIT.

